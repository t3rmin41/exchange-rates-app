<div data-ng-controller="CurrencyRateController as $ctrl">


  <div class="row">
    <div class="alert alert-danger" ng-show="errorMessage"> {{ errorMessage }} </div>
    <div class="form-group">
      <input type="text" class="form-control" id="currencyratesearch" placeholder="Search currency rates" data-ng-model="currencyratesearch" />
    </div>

    <div class="col-xs-3">
      <div class="form-group" ng-class="{ 'has-error' : errors['datePicked'] }">
        <label for="txtDate">Date:</label>
        <input id="txtDate" type="text" placeholder="yyyy-MM-dd" class="form-control" 
               datepicker-popup="yyyy-MM-dd" 
               ng-model="datePicked" 
               is-open="$ctrl.opened" close-text="Close"
               />
        <span class="input-group-btn">
          <!-- <button type="button" ng-click="$ctrl.open($event)" class="btn btn-default"><i class="glyphicon glyphicon-calendar"></i></button> -->
        </span>
        <p class="help-block" ng-show="errors['datePicked']"> {{ errors['datePicked'] }} </p>
      </div>
    </div>
    
  </div>
  <div class="row">
    <div class="form-group">
      <button ng-click="$ctrl.getAllCurrencyRateChanges()" class="btn btn-primary">Get all currency rate changes</button>
    </div>
    <i ng-hide="dataLoaded" class="fa fa-refresh fa-spin" style="font-size:24px"></i>
      <table ng-show="dataLoaded" class="table table-striped table-hover">
      <tbody>
        <tr>
          <th>Currency code</th>
          <th>Dates compared</th>
          <th>Absolute difference</th>
        </tr>
        <tr data-ng-repeat="currencyRate in currencyRates | filter:currencyratesearch" >
          <td>{{currencyRate.currency.code}}</td>
          <td>{{currencyRate.actualDate}} / {{currencyRate.comparedDate}}</td>
          <td>{{currencyRate.absoluteDifferenceFormatted}}</td>
        </tr>
      </tbody>
      </table>
  </div>
</div>
